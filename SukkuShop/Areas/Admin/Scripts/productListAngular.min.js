function showAjaxLoader(){var n=jQuery("#ajax-processing");n.length===0&&(jQuery("body").append("<div id='ajax-processing'><\/div>"),n=jQuery("#ajax-processing"));n.show()}function showAjaxTick(){var n=jQuery("#ajax-completetick");n.length===0&&(jQuery("body").append("<div id='ajax-completetick'>&#10004;<\/div>"),n=jQuery("#ajax-completetick"));n.show()}function fadeOutAjaxTick(){jQuery("#ajax-completetick").stop().fadeOut(1e3)}function hideAjaxTick(){jQuery("#ajax-completetick").stop().hide()}function hideAjaxLoader(){jQuery("#ajax-processing").hide()}jQuery(document).ready(function(){jQuery(document).bind("mousemove",function(n){jQuery("#ajax-processing,#ajax-completetick").css({left:n.pageX+20,top:n.pageY})});showAjaxLoader();hideAjaxLoader();showAjaxTick();hideAjaxTick()});var adminApp=angular.module("adminApp",[]),itemsPerPage=12;adminApp.controller("AdminProdCtrl",["$scope","$http","$filter",function(n,t,i){function r(t){var r=[],f=[],e,u,s,o;if(n.selectedCategory!=0)for(e=0;e<t.length;e++)(t[e].CategoryId==n.selectedCategory||t[e].upper==n.selectedCategory)&&r.push(t[e]);else r=t;for(u=0;u<r.length;u++)n.published==!1&&n.isready==!1&&n.wrongmodel==!1?f.push(r[u]):(n.published&&r[u].Published||n.isready&&r[u].WrongModel==!1&&r[u].Published==!1||n.wrongmodel&&r[u].WrongModel==!0)&&f.push(r[u]);for(n.textFilter&&(f=i("filter")(f,{Name:n.textFilter})),n.productsOperative=f,n.pages=Math.ceil(f.length/itemsPerPage),s=[],o=1;o<=n.pages;o++)s.push(o);return n.tableOfPages=s,f.slice(n.currentPage*itemsPerPage-itemsPerPage,n.currentPage*itemsPerPage)}var u=i("orderBy");n.init=function(i,u){n.Object=Object;n.selectedIndex=1;n.selectedCategory=parseInt(u);n.currentPage=1;n.currentFilter=0;n.textFilter=i;n.published=!1;n.isready=!1;n.wrongmodel=!1;n.infoboxActive=!1;t.get("/Admin/Produkty/GetProductList").success(function(t){n.productsTotal=t.products;n.productsOperative=n.productsTotal;n.categories=t.categories;for(var i=0;i<n.productsTotal.length;i++)n.warningCounter(n.productsTotal[i].ProductId);n.productsList=r(n.productsTotal)})};n.filterByCheckboxes=function(){n.currentPage=1;n.productsList=r(n.productsTotal)};n.SetQuantity=function(i,u){showAjaxLoader();t.post("/Admin/Produkty/SetQuantity",{id:i,quantity:u}).success(function(t){if(t==!0){var f=$.grep(n.productsTotal,function(n){return n.ProductId==i});f[0].Quantity=u;f[0].warning.demandsCount=0;n.warningCounter(i)}hideAjaxLoader();showAjaxTick();fadeOutAjaxTick();n.productsList=r(n.productsTotal)}).error(function(n,t,i){alert(i);console.log(n.responseText)})};n.warningCounter=function(t){var r=0,i=$.grep(n.productsTotal,function(n){return n.ProductId==t});i[0].warning.demandsCount>0&&r++;i[0].warning.lowQuantity!=null&&i[0].Quantity-i[0].ReservedQuantity<10&&i[0].Quantity-i[0].ReservedQuantity>0&&r++;i[0].warning.noProduct!=null&&i[0].Quantity-i[0].ReservedQuantity==0&&r++;i[0].warningcount=r};n.keyPressRabat=function(n){return n.which!=8&&n.which!=0&&(n.which<48||n.which>57)?(n.preventDefault(),!1):!0};n.orderByMhm=function(t,i,f){n.selectedIndex=f;n.currentPage=1;var e=u(n.productsTotal,t,i);n.productsList=r(e)};n.deleteitemask=function(t){if(n.infoboxActive==!1){var i=$.grep(n.productsTotal,function(n){return n.ProductId==t});i.length==0||i.length==1&&(i[0].canDelete=!0)}};n.nodeleteitem=function(t){var i=$.grep(n.productsTotal,function(n){return n.ProductId==t});i.length==0||i.length==1&&(i[0].canDelete=!1)};n.deleteitem=function(i){n.infoboxActive==!1&&(showAjaxLoader(),t.post("/Admin/Produkty/DeleteProduct",{id:i}).success(function(t){t==!0&&(n.productsTotal=$.grep(n.productsTotal,function(n){return n.ProductId!=i}),n.productsList=r(n.productsTotal));hideAjaxLoader()}).error(function(){}))};n.getinfo=function(t){if(n.infoboxActive==!1){n.infoboxActive=!0;var i=$.grep(n.productsTotal,function(n){return n.ProductId==t});i.length==0||i.length==1&&(i[0].showinfo=!0)}};n.getWarning=function(t){if(n.infoboxActive==!1){n.infoboxActive=!0;var i=$.grep(n.productsTotal,function(n){return n.ProductId==t});i.length==0||i.length==1&&(i[0].showwarning=!0)}};n.closeinfobox=function(t,i){n.infoboxActive=!1;var r=$.grep(n.productsTotal,function(n){return n.ProductId==t});r.length==0||r.length==1&&(r[0].showinfo=!1);i&&i.stopPropagation()};n.closewarningbox=function(t,i){n.infoboxActive=!1;var r=$.grep(n.productsTotal,function(n){return n.ProductId==t});r.length==0||r.length==1&&(r[0].showwarning=!1);i&&i.stopPropagation()};n.itemClicked=function(t,i){n.textFilter="";n.selectedCategory=t==n.selectedCategory?0:t;n.currentPage=1;n.productsList=r(n.productsTotal);i&&i.stopPropagation()};n.publish=function(i){n.infoboxActive==!1&&(showAjaxLoader(),t.post("/Admin/Produkty/PublishProduct",{id:i}).success(function(t){if(t==!0){var u=$.grep(n.productsTotal,function(n){return n.ProductId==i});u.length==0||u.length==1&&(u[0].Published=!0)}hideAjaxLoader();n.productsList=r(n.productsOperative)}).error(function(){}))};n.unpublish=function(i){n.infoboxActive==!1&&(showAjaxLoader(),t.post("/Admin/Produkty/UnpublishProduct",{id:i}).success(function(t){if(t==!0){var u=$.grep(n.productsTotal,function(n){return n.ProductId==i});u.length==0||u.length==1&&(u[0].Published=!1)}n.productsList=r(n.productsOperative);hideAjaxLoader()}).error(function(){}))};n.setPage=function(t){t<=0&&(t=1);t>n.pages&&(t=n.pages);n.currentPage=t;n.productsList=r(n.productsOperative)};n.filterByName=function(){n.published=!1;n.isready=!1;n.wrongmodel=!1;n.selectedCategory=0;n.currentPage=1;var t=i("filter")(n.productsTotal,{Name:n.textFilter});n.productsList=r(t)}}]);
//# sourceMappingURL=productListAngular.min.js.map
