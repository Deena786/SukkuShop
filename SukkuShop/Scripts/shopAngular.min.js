function currency(n){return n=parseFloat(n),isNaN(n)?!1:n.toFixed(2)}var shopApp=angular.module("shopApp",[]),itemsPerPage=12;shopApp.controller("ShopCtrl",["$scope","$http","$filter",function(n,t,i){function r(){var t,e,u,r,o,f;if(t=n.selectedIndex!=n.subCategoryList.length-1?i("filter")(n.products.productList,{Category:n.subCategoryList[n.selectedIndex]}):n.products.productList,n.onlyavailable){for(e=[],u=0;u<t.length;u++)t[u].QuantityInStock!=0&&e.push(t[u]);t=e}r=i("orderBy");switch(n.sortMethod){case"Nowosc":t=r(t,"DateAdded",!1);break;case"Popularnosc":t=r(t,"OrdersCount",!0);break;case"CenaRosnaco":t=r(t,"PriceAfterDiscount",!1);break;case"CenaMalejaco":t=r(t,"PriceAfterDiscount",!0);break;case"Promocja":t=r(t,"Promotion",!0)}for(n.pages=Math.ceil(t.length/12),o=[],f=1;f<=n.pages;f++)o.push(f);return n.tableOfPages=o,t.slice(n.currentPage*12-12,n.currentPage*12)}n.init=function(i){n.sortMethod="Nowosc";n.currentPage=1;n.category=i;n.onlyavailable=!1;n.category==""?(t.get("/Sklep/GetProductByCategory").success(function(t){n.products=t;n.subCategoryList=n.products.subcategoryList;n.selectedIndex=n.subCategoryList.length-1;n.productList=r()}).error(function(n,t,i){alert(i);console.log(n)}),n.imgName="inne"):t.get("/Sklep/GetProductByCategory/"+n.category).success(function(t){n.products=t;n.subCategoryList=n.products.subcategoryList;n.selectedIndex=n.subCategoryList.length-1;n.productList=r();n.imgName=n.products.categoryId!=0?i.toLowerCase():"inne"}).error(function(n,t,i){alert(i);console.log(n)})};n.AddToCart=function(i){t.post("/Koszyk/AddToCart/SetQuantity",{id:i,quantity:1}).success(function(t){var u=$("#cart-price-header").html().toLowerCase().replace("&nbsp;","").replace("zł","").replace("koszyk","").replace(" ",""),r=$.grep(n.products.productList,function(n){return n.Id==t.id});parseFloat(u)!=parseFloat(t.value)?(r[0].CartAmount++,$("#cart-price-header").html("KOSZYK "+t.value+" zł")):($("#addinfo"+i).html("&#10005;<span style='font-size:20px'>"+r[0].CartAmount+"<\/span>"),jQuery("#addinfo"+i).css("color","red"),jQuery("#addinfo"+i).fadeOut(1e3,function(){jQuery(this).css("color","green").html("&#10003;<span style='font-size:20px'>"+r[0].CartAmount+"<\/span>").fadeIn(1e3)}))}).error(function(n,t,i){alert(i);console.log(n.responseText)})};n.itemClicked=function(t){n.selectedIndex=t;n.currentPage=1;n.productList=r()};n.setSortMethod=function(t){n.sortMethod=t;n.currentPage=1;n.productList=r()};n.setPage=function(t){t<=0&&(t=1);t>n.pages&&(t=n.pages);n.currentPage=t;n.productList=r()};n.filterByCheckboxes=function(){n.currentPage=1;n.productList=r()}}]);jQuery(document).ready(function(){jQuery(".product-title").each(function(){var n=jQuery(this);$clamp(n,{clamp:2})});jQuery("#add-to-cart-info").hide();jQuery("ul.sort-menu div.plz").click(function(){jQuery("ul.sort-menu div.plz").css("opacity","0.6");jQuery("ul.sort-menu li.sort-box #sort-text").css("font-weight","normal");jQuery(this).css("opacity","1");jQuery(this).siblings("#sort-text").css("font-weight","bold");jQuery(this).parent().siblings("#sort-text").css("font-weight","bold")})});
//# sourceMappingURL=shopAngular.min.js.map
